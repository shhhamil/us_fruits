<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>US Fruits - coupon </title>
    {% load static %}
    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'userr/css/open-iconic-bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'userr/css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'userr/css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'userr/css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'userr/css/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'userr/css/aos.css' %}">
    <link rel="stylesheet" href="{% static 'userr/css/ionicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'userr/css/jquery.timepicker.css' %}">
    <link rel="stylesheet" href="{% static 'userr/css/flaticon.css' %}">
    <link rel="stylesheet" href="{% static 'userr/css/icomoon.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">

    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #2563eb;
            --secondary-color: #10b981;
            --text-color: #333;
            --bg-color: #f5f5f5;
            --sidebar-width: 250px;
            --sidebar-collapsed-width: 70px;
            --header-height: 60px;
            --transition-speed: 0.3s;
        }

        body {
            background-color: var(--bg-color);
            overflow-x: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background: white;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            transition: all var(--transition-speed) ease;
            z-index: 1000;
        }

        .sidebar.collapsed {
            width: var(--sidebar-collapsed-width);
        }

        .brand-wrap {
            height: var(--header-height);
            padding: 0 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #eee;
        }

        .brand-logo {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 1.5rem;
            font-weight: bold;
            white-space: nowrap;
            transition: opacity var(--transition-speed);
        }

        .collapsed .brand-logo {
            opacity: 0;
            display: none;
        }

        .toggle-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--text-color);
            padding: 0.5rem;
            transition: transform var(--transition-speed);
        }

        .collapsed .toggle-btn {
            transform: rotate(180deg);
        }

        /* Menu Items */
        .menu-list {
            list-style: none;
            padding: 1rem 0;
        }

        .menu-item {
            padding: 0.5rem 1.5rem;
        }

        .menu-link {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            color: var(--text-color);
            text-decoration: none;
            border-radius: 0.5rem;
            transition: background-color var(--transition-speed);
        }

        .menu-link:hover {
            background-color: #f3f4f6;
        }

        .menu-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-size: 1.25rem;
        }

        .menu-text {
            transition: opacity var(--transition-speed);
            white-space: nowrap;
        }

        .collapsed .menu-text {
            opacity: 0;
            display: none;
        }

        /* Main Content */
        .main-wrap {
            margin-left: var(--sidebar-width);
            transition: margin var(--transition-speed) ease;
            min-height: 100vh;
        }

        .main-wrap.expanded {
            margin-left: var(--sidebar-collapsed-width);
        }

        .main-header {
            height: var(--header-height);
            background: white;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        /* Search Form */
        .search-form {
            flex: 1;
            max-width: 400px;
            margin: 0 2rem;
        }

        .search-input {
            width: 100%;
            padding: 10px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            outline: none;
        }

        /* Dropdown Styles */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-menu {
            position: absolute;
            top: 30px;
            right: 0;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            padding: 10px;
            width: 150px;
            z-index: 1;
        }

        .dropdown-item {
            padding: 8px 12px;
            display: block;
            text-decoration: none;
            color: #333;
            border-radius: 4px;
        }

        .dropdown-item:hover {
            background-color: #f0f0f0;
        }

        /* Responsive Improvements */
        @media (max-width: 768px) {
            .content-header {
                flex-direction: column;
                gap: 15px;
            }
        }

        /* NEW STYLES FOR COUPON TABLE AND MODAL */
        /* Coupon Table Styles */
        .coupon-container {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 25px;
            margin: 20px;
        }

        .coupon-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .coupon-title {
            color: #111827;
            font-size: 1.75rem;
            font-weight: 600;
            position: relative;
            padding-bottom: 8px;
        }

        .coupon-title:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 4px;
            background-color: var(--primary-color);
            border-radius: 2px;
        }

        .add-coupon-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .add-coupon-btn:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(37, 99, 235, 0.2);
        }

        .coupon-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .coupon-table thead th {
            background-color: #222;
            color: #fff;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
            padding: 14px 20px;
            text-align: left;
            border: none;
        }

        .coupon-table tbody tr {
            transition: all 0.2s ease;
        }

        .coupon-table tbody tr:hover {
            background-color: #f0f9ff;
        }

        .coupon-table td {
            padding: 14px 20px;
            border-bottom: 1px solid #e5e7eb;
            vertical-align: middle;
        }

        .coupon-code {
            font-weight: 600;
            color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
        }

        .coupon-discount {
            font-weight: 600;
            color: var(--secondary-color);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-active {
            background-color: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .status-inactive {
            background-color: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .action-btn {
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            font-weight: 500;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-block;
        }

        .delete-btn {
            background-color: #fee2e2;
            color: #ef4444;
        }

        .delete-btn:hover {
            background-color: #ef4444;
            color: white;
        }

        /* Modal Styles */
        .coupon-modal .modal-content {
            border: none;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .coupon-modal .modal-header {
            background-color: var(--primary-color);
            color: white;
            border-bottom: none;
            padding: 20px 25px;
        }

        .coupon-modal .modal-title {
            font-weight: 600;
            font-size: 1.25rem;
        }

        .coupon-modal .btn-close {
            color: white;
            opacity: 1;
            filter: brightness(0) invert(1);
        }

        .coupon-modal .modal-body {
            padding: 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #4b5563;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            outline: none;
        }

        .save-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.95rem;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .save-btn:hover {
            background-color: #1d4ed8;
        }

        @media (max-width: 992px) {
            .coupon-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .coupon-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        }

        @media (max-width: 768px) {
            .coupon-container {
                padding: 15px;
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="brand-wrap">
            <a href="#" class="brand-logo">US Fruits</a>
            <button class="toggle-btn">⬅</button>
        </div>
        <nav>
            <ul class="menu-list">
                <li class="menu-item">
                    <a class="menu-link" href="{% url 'Admin_Dashbord' %}">
                        <span class="menu-icon">&#127968;</span>
                        <span class="menu-text">Dashboard</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="{% url 'Product' %}">
                        <span class="menu-icon">&#128722;</span>
                        <span class="menu-text">Products Management</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="{% url 'Category' %}">
                        <span class="menu-icon">&#128717;</span>
                        <span class="menu-text">Category Management</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="{% url 'User_Management' %}">
                        <span class="menu-icon">&#128101;</span>
                        <span class="menu-text">User Management</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="{% url 'Order_Management' %}">
                        <span class="menu-icon">&#128230;</span>
                        <span class="menu-text">Order Management</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="{% url 'sales_report' %}">
                        <span class="menu-icon"><i class="fas fa-chart-line"></i></span>  
                        <span class="menu-text"> Sales Report</span>
                    </a>
                </li>
                
                <li class="menu-item">
                    <a class="menu-link" href="{% url  'coupon_list' %}">
                        <span class="menu-icon">&#128176;</span> 
                        <span class="menu-text">Coupons Management</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <main class="main-wrap">
        <header class="main-header">
            <form method="get" class="search-form">
                <input type="text" name="search" class="search-input" placeholder="Search..." value="{{ search_term }}">
                
            </form>
            <div class="header-nav">
                <div class="dropdown">
                    <a href="#" class="dropdown-toggle" onclick="toggleDropdown()" style="font-size: 24px; cursor: pointer;">
                        <span class="nav-icon">&#128100;</span>
                    </a>
                    <div class="dropdown-menu" id="profileDropdown" style="display: none;">
                        <a href="#" class="dropdown-item" style="color: rgb(3, 3, 3);">Profile</a>
                        <a href="{% url 'Admin_Logout' %}" class="dropdown-item" style="color: #ef4444;">Logout</a>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="coupon-container">
            <div class="coupon-header">
                <h2 class="coupon-title">Coupon Management</h2>
                <button class="add-coupon-btn" data-bs-toggle="modal" data-bs-target="#addCouponModal">
                    <i class="fas fa-plus"></i> Add New Coupon
                </button>
            </div>
            
            <table class="coupon-table">
                <thead>
                    <tr>
                        <th>Coupon Code</th>
                        <th>Discount Price</th>
                        <th>minimum limit</th>
                        <th>Minimum Order Price</th>
                        <th>Valid From</th>
                        <th>Valid To</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for coupon in coupons %}
                    <tr>
                        <td>{{ coupon.code }}</td>
                        <td>{{ coupon.discount_amount }}</td>
                        <td>{{coupon.usage_limit}}</td>
                        <td>{{ coupon.min_order_amount }}</td>
                        <td>{{ coupon.start_date|date:"M d, Y" }}</td>
                        <td>{{ coupon.end_date|date:"M d, Y" }}</td>
                        <td>
                            <button class="edit-coupon-btn" 
                            data-id="{{ coupon.id }}" 
                            data-code="{{ coupon.code }}" 
                            data-discount="{{ coupon.discount_amount }}" 
                            data-min-order="{{ coupon.min_order_amount }}" 
                            data-usage="{{ coupon.usage_limit }}" 
                            data-start="{{ coupon.valid_from|date:'Y-m-d\TH:i' }}" 
                            data-end="{{ coupon.valid_to|date:'Y-m-d\TH:i' }}"
                            data-url="{% url 'edit_coupon' coupon.id %}">
                        Edit
                    </button>
                    
                        
                        
            
                            <!-- Delete/Restore Button -->
                            <a href="{% url 'delete_coupon' coupon.id %}" 
                               class="btn {% if coupon.is_deleted %}btn-success{% else %}btn-danger{% endif %}">
                                <i class="fas {% if coupon.is_deleted %}fa-undo{% else %}fa-trash{% endif %}"></i> 
                                {% if coupon.is_deleted %} Restore {% else %} Delete {% endif %}
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            
            
        </div>
    
       <!-- Coupon Modal -->
<div class="modal fade coupon-modal" id="addCouponModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-ticket-alt me-2"></i> Create New Coupon
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="addCouponForm">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label class="form-label" for="couponCode">Coupon Code</label>
                        <input type="text" id="couponCode" name="code" class="form-control" placeholder="Enter coupon code (e.g. SUMMER25)" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="discountAmount">Discount Amount</label>
                        <input type="number" id="discountAmount" name="discount_amount" class="form-control" placeholder="Enter discount amount (e.g. 50)" min="1" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="minOrderAmount">Minimum Order Amount</label>
                        <input type="number" id="minOrderAmount" name="minimum_order_amount" class="form-control" placeholder="Enter minimum order amount (e.g. 500)" min="1" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="usageLimit">Usage Limit</label>
                        <input type="number" id="usageLimit" name="usage_limit" class="form-control" placeholder="Enter usage limit (e.g. 10)" min="1" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="validFrom">Valid From</label>
                        <input type="datetime-local" id="validFrom" name="start_date" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="validTo">Valid To</label>
                        <input type="datetime-local" id="validTo" name="end_date" class="form-control" required>
                    </div>

                    <button type="submit" class="save-btn">
                        <i class="fas fa-save me-2"></i> Save Coupon
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Edit Coupon Modal -->
<div class="modal fade coupon-modal" id="editCouponModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-ticket-alt me-2"></i> Edit Coupon
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="editCouponForm" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="couponId" name="coupon_id">
                
                    <div class="form-group">
                        <label class="form-label" for="editCouponCode">Coupon Code</label>
                        <input type="text" id="editCouponCode" name="code" class="form-control" required>
                    </div>
                
                    <div class="form-group">
                        <label class="form-label" for="editDiscountAmount">Discount Amount</label>
                        <input type="number" id="editDiscountAmount" name="discount_amount" class="form-control" min="1" required>
                    </div>
                
                    <div class="form-group">
                        <label class="form-label" for="editMinOrderAmount">Minimum Order Amount</label>
                        <input type="number" id="editMinOrderAmount" name="min_order_amount" class="form-control" min="1" required>
                    </div>
                
                    <div class="form-group">
                        <label class="form-label" for="editUsageLimit">Usage Limit</label>
                        <input type="number" id="editUsageLimit" name="usage_limit" class="form-control" min="1" required>
                    </div>
                
                    <div class="form-group">
                        <label class="form-label" for="editValidFrom">Valid From</label>
                        <input type="datetime-local" id="editValidFrom" name="start_date" class="form-control" required>
                    </div>
                
                    <div class="form-group">
                        <label class="form-label" for="editValidTo">Valid To</label>
                        <input type="datetime-local" id="editValidTo" name="end_date" class="form-control" required>
                    </div>
                
                    <button type="submit" class="save-btn">
                        <i class="fas fa-save me-2"></i> Update Coupon
                    </button>
                </form>
                
            </div>
        </div>
    </div>
</div>


    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // ✅ Sidebar Toggle
            const toggleBtn = document.querySelector(".toggle-btn");
            if (toggleBtn) {
                toggleBtn.addEventListener("click", function () {
                    document.querySelector(".sidebar").classList.toggle("collapsed");
                    document.querySelector(".main-wrap").classList.toggle("expanded");
                });
            }
        
            // ✅ Profile Dropdown Toggle
            function toggleDropdown() {
                const dropdown = document.getElementById("profileDropdown");
                dropdown.style.display = (dropdown.style.display === "none" || dropdown.style.display === "") ? "block" : "none";
            }
        
            // ✅ Close dropdown when clicking outside
            window.addEventListener("click", function (e) {
                const dropdown = document.getElementById("profileDropdown");
                if (dropdown && !e.target.closest(".dropdown-toggle, .nav-icon")) {
                    dropdown.style.display = "none";
                }
            });
        
            // ✅ Function to Handle Form Submission
            function handleCouponForm(formId, url, successMessage) {
                const form = document.getElementById(formId);
                if (!form) return;
        
                form.addEventListener("submit", function (event) {
                    event.preventDefault();
                    let formData = new FormData(this);
        
                    // Get CSRF token
                    const csrfToken = document.querySelector("[name=csrfmiddlewaretoken]").value;
                    const submitBtn = this.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
        
                    // Show loading indicator
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Processing...';
                    submitBtn.disabled = true;
        
                    console.log("Submitting to:", url);  // Debugging: Check if URL is correct
        
                    fetch(url, {
                        method: "POST",
                        body: formData,
                        headers: { "X-CSRFToken": csrfToken }
                    })
                    .then(response => response.json())
                    .then(data => {
                        document.querySelectorAll(".alert").forEach(alert => alert.remove());
        
                        const alertDiv = document.createElement("div");
                        alertDiv.className = `alert mt-3 ${data.success ? "alert-success" : "alert-danger"}`;
                        alertDiv.innerHTML = `<i class="fas ${data.success ? "fa-check-circle" : "fa-exclamation-circle"} me-2"></i> 
                                              ${data.success ? successMessage : data.error || "An error occurred."}`;
                        form.appendChild(alertDiv);
        
                        if (data.success) {
                            setTimeout(() => window.location.reload(), 1500);
                        }
                    })
                    .catch(error => {
                        console.error("Error:", error);
                        const errorAlert = document.createElement("div");
                        errorAlert.className = "alert alert-danger mt-3";
                        errorAlert.innerHTML = '<i class="fas fa-exclamation-circle me-2"></i> An error occurred.';
                        form.appendChild(errorAlert);
                    })
                    .finally(() => {
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                    });
                });
            }
        
            // ✅ Handle Add Coupon Submission
            handleCouponForm("addCouponForm", "{% url 'add_coupon' %}", "Coupon added successfully!");
        
            // ✅ Handle Edit Coupon Form Submission
            document.addEventListener("click", function (event) {
                if (event.target.classList.contains("edit-coupon-btn")) {
                    const button = event.target;
        
                    // Set form field values dynamically
                    document.getElementById("couponId").value = button.getAttribute("data-id");
                    document.getElementById("editCouponCode").value = button.getAttribute("data-code");
                    document.getElementById("editDiscountAmount").value = button.getAttribute("data-discount");
                    document.getElementById("editMinOrderAmount").value = button.getAttribute("data-min-order");
                    document.getElementById("editUsageLimit").value = button.getAttribute("data-usage");
                    document.getElementById("editValidFrom").value = button.getAttribute("data-start");
                    document.getElementById("editValidTo").value = button.getAttribute("data-end");
        
                    // ✅ Set form action dynamically
                    const editForm = document.getElementById("editCouponForm");
                    const editUrl = button.getAttribute("data-url");
        
                    console.log("Edit form submitting to:", editUrl);  // Debugging
        
                    editForm.setAttribute("action", editUrl);
                    
                    // ✅ Handle form submission
                    handleCouponForm("editCouponForm", editUrl, "Coupon updated successfully!");
        
                    // ✅ Show Bootstrap modal
                    let editCouponModal = new bootstrap.Modal(document.getElementById("editCouponModal"));
                    editCouponModal.show();
                }
            });
        
            // ✅ Set Default Dates for Add Coupon Form
            function formatDate(date) {
                return date.toISOString().slice(0, 16); // Format: YYYY-MM-DDTHH:MM
            }
        
            const now = new Date();
            const nextMonth = new Date();
            nextMonth.setMonth(nextMonth.getMonth() + 1);
        
            document.getElementById("validFrom")?.setAttribute("value", formatDate(now));
            document.getElementById("validTo")?.setAttribute("value", formatDate(nextMonth));
        });
                                
    </script>
</body>
</html>